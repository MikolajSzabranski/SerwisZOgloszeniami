{% extends 'SZO/base.html' %}

{% block title%}Premium{% endblock %}

{% load crispy_forms_tags %}

{% block content %}
{% if user.is_authenticated %}
    {% if user.groups.all.1.name == 'premium' %}
        <div>
            <br><h3>You are already premium user</h3>
        </div>
    {% elif user.groups.all.0.name == 'seeker' %}
        <div>
            <br><h3>You are registered as a seeker.<br>Using this app is free for you.</h3>
        </div>
    {% else %}
    <div class="content-section">
        {% csrf_token %}
        {{form|crispy}}
        <br><br>
        <div>
            You can still use "Find your job" for free with 3 advertisements at the same time. <br> You can also purchase premium account with one-time 10PLN payment
        </div>
        <form method="post" action="https://secure.payu.com/api/v2_1/orders" class="form-group">
            <input type="hidden" name="customerIp" value="123.123.123.123">
            <input type="hidden" name="merchantPosId" value="145227">
            <input type="hidden" name="description" value="Order description">
            <input type="hidden" name="totalAmount" value="1000">
            <input type="hidden" name="currencyCode" value="PLN">
            <input type="hidden" name="products[0].name" value="Product 1">
            <input type="hidden" name="products[0].unitPrice" value="1000">
            <input type="hidden" name="products[0].quantity" value="1">
            <input type="hidden" name="notifyUrl" value="http://shop.url/notify">
            <input type="hidden" name="continueUrl" value="http://shop.url/continue">
            <input type="hidden" name="OpenPayu-Signature" value="sender=145227;algorithm=SHA-256;signature=bc94a8026d6032b5e216be112a5fb7544e66e23e68d44b4283ff495bdb3983a8">
            <br><button type="submit" formtarget="_blank" class="btn btn-lg btn-primary btn-block">Pay with PayU</button>
        </form>
    </div>
    {% endif %}
{% else %}
<h3><a href="/login">Login</a> first</h3>
{% endif %}
{% endblock %}
